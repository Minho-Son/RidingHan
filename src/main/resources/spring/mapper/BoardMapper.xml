<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tis.board.mapper.BoardMapper">
   <select id="getAllBoardListPaging" resultType="Board" parameterType="com.tis.board.model.PagingVO">
      select * from(
      select  board.*,row_number() over(order by board_idx desc) rn
      from board) where rn between #{start} and #{end}
   </select>
   <select id="getTotalCount" resultType="int">
      select count(*) from board
   </select>
   <insert id="insertBoard" parameterType="Board">
      insert into board (board_idx,board_title,board_user_no,board_pwd,board_content,board_wdate,
      user_id,originfilename,filename,filesize,refer,lev,sunbun,user_nick)
      values (board_seq.nextval,#{board_title},#{board_user_no},#{board_pwd},#{board_content:VARCHAR},sysdate,
     #{user_id},#{originFilename:VARCHAR},#{filename:VARCHAR},#{filesize:VARCHAR},#{board_idx},#{lev},#{sunbun},#{user_nick}) 
   </insert>
   <select id="selectBoardView" parameterType="int" resultType="Board">
      select board_idx,board_title,board_pwd,board_content,board_wdate,originfilename,filesize,
      (select user_nick from member where user_no=board_user_no) user_nick,
      (select user_no from member where user_no=board_user_no) board_user_no
       from board where board_idx=#{value}
   </select>
   <update id="editBoard" parameterType="board">
      update board set board_title=#{board_title},board_content=#{board_content},board_pwd=#{board_pwd}
      where board_idx= #{board_idx}
   </update>
   <update id="deleteBoard" parameterType="int">
      delete from board where board_idx=#{board_idx}
   </update>
   <select id="searchBoard" parameterType="com.tis.board.model.PagingVO" resultType="Board">
         select * from board where board_title like '%'||#{findKeyword}||'%'
   </select>
</mapper>